<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UIDAI Analytics | Executive Dashboard</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&family=Inter:wght@400;500;600&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="dashboard.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>


    <div class="dashboard-container">
        <!-- Sidebar Navigation -->
        <aside class="sidebar">
            <div class="logo-area">
                <div class="logo-icon">
                    <i class="fa-solid fa-fingerprint"></i>
                </div>
                <span>UIDAI <span class="accent">Insight</span></span>
            </div>

            <nav class="nav-menu">
                <a href="#" id="nav-overview" class="nav-item active">
                    <i class="fa-solid fa-grid-2"></i>
                    <span>Overview</span>
                </a>
                <a href="#" id="nav-trends" class="nav-item">
                    <i class="fa-solid fa-chart-line"></i>
                    <span>Trends</span>
                </a>
                <a href="#" id="nav-geo" class="nav-item">
                    <i class="fa-solid fa-map-location-dot"></i>
                    <span>Geospatial</span>
                </a>
                <a href="#" id="nav-reports" class="nav-item">
                    <i class="fa-solid fa-file-export"></i>
                    <span>Reports</span>
                </a>
            </nav>


        </aside>

        <!-- Main Content Area -->
        <main class="main-content">
            <!-- Overview Section -->
            <div id="view-overview" class="view-section active">
                <header class="top-bar">
                    <div class="header-text">
                        <h1 data-i18n="executive_overview">Executive Overview</h1>
                        <p data-i18n="real_time_insights">Real-time insights from uploaded dataset</p>
                    </div>
                    <div style="display: flex; gap: 12px;">
                        <a href="index.html" class="btn-secondary-small" style="gap: 8px; text-decoration: none;">
                            <i class="fa-solid fa-upload"></i>
                            <span>Upload New Data</span>
                        </a>
                        <button id="langToggleBtn" class="btn-secondary-small" style="gap: 8px;">
                            <i class="fa-solid fa-language"></i>
                            <span id="langText">हिंदी</span>
                        </button>
                        <button id="viewFileBtn" class="btn-primary-small" style="gap: 8px;">
                            <i class="fa-solid fa-file-csv"></i> 
                            <span data-i18n="view_source">View Source File</span>
                        </button>
                    </div>
                </header>
                
                <!-- Validation Warnings (hidden by default) -->
                <div id="validationWarnings" style="display: none; margin-bottom: 24px;"></div>
                
                <!-- Executive Summary -->
                <div class="glass-panel" style="margin-bottom: 24px; padding: 24px;">
                    <h3 style="margin-bottom: 12px; display: flex; align-items: center; gap: 8px;">
                        <i class="fa-solid fa-chart-line" style="color: var(--primary);"></i>
                        <span data-i18n="executive_summary">Executive Summary</span>
                    </h3>
                    <p id="executiveSummary" style="color: var(--text-muted); line-height: 1.6;">
                        Upload data to view comprehensive insights and analytics.
                    </p>
                </div>

                <!-- Dashboard Grid -->
                <div class="dashboard-grid">

                    <!-- KPI Card 1: Total Enrolments -->
                    <div class="kpi-card glass-panel clickable-card" data-modal="enrolmentModal">
                        <div class="kpi-header">
                            <div class="icon-box blue">
                                <i class="fa-solid fa-users"></i>
                            </div>
                            <div class="trend up" style="display: none;">
                                <i class="fa-solid fa-arrow-trend-up"></i>
                                <span>-</span>
                            </div>
                        </div>
                        <div class="kpi-value-group">
                            <h2 class="value">0</h2>
                            <p class="label" data-i18n="total_enrolments">Total Enrolments</p>
                        </div>
                        <div class="insight-badge success" style="display: none;">
                            <i class="fa-solid fa-check"></i>
                            <span>Upload data to view insights</span>
                        </div>
                    </div>

                    <!-- KPI Card 2: Total Updates -->
                    <div class="kpi-card glass-panel clickable-card" data-modal="updatesModal">
                        <div class="kpi-header">
                            <div class="icon-box purple">
                                <i class="fa-solid fa-arrows-rotate"></i>
                            </div>
                            <div class="trend down" style="display: none;">
                                <i class="fa-solid fa-arrow-trend-down"></i>
                                <span>-</span>
                            </div>
                        </div>
                        <div class="kpi-value-group">
                            <h2 class="value">0</h2>
                            <p class="label" data-i18n="total_updates">Total Updates</p>
                        </div>
                        <div class="insight-badge warning" style="display: none;">
                            <i class="fa-solid fa-triangle-exclamation"></i>
                            <span>Upload data to view insights</span>
                        </div>
                    </div>

                    <!-- KPI Card 3: Updates Breakdown (Chart) -->
                    <div class="kpi-card glass-panel wide-card">
                        <div class="card-title">
                            <h3 data-i18n="update_composition">Update Composition</h3>
                            <p data-i18n="demographic_vs_biometric">Demographic vs Biometric</p>
                        </div>
                        <div class="chart-container-row">
                            <div class="chart-wrapper">
                                <canvas id="updatesChart"></canvas>
                            </div>
                            <div class="chart-legend">
                                <div class="legend-item">
                                    <span class="dot purple"></span>
                                    <div>
                                        <span class="l-val">0%</span>
                                        <span class="l-lbl" data-i18n="biometric">Biometric</span>
                                    </div>
                                </div>
                                <div class="legend-item">
                                    <span class="dot blue"></span>
                                    <div>
                                        <span class="l-val">0%</span>
                                        <span class="l-lbl" data-i18n="demographic">Demographic</span>
                                    </div>
                                </div>
                                <div class="insight-text" style="display: none;">
                                    <i class="fa-solid fa-circle-info"></i>
                                    <span>Upload data to view breakdown</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- KPI Card 4: Top Regions Activity -->
                    <div class="kpi-card glass-panel tall-card">
                        <div class="card-title">
                            <h3 data-i18n="regional_hotspots">Regional Hotspots</h3>
                            <button id="viewAllStatesBtn" class="btn-text" data-i18n="view_all">View All</button>
                        </div>
                        <div class="region-list">
                            <!-- Populated dynamically from uploaded data -->
                            <div class="empty-state" style="text-align: center; padding: 40px 20px; color: var(--text-muted);">
                                <i class="fa-solid fa-map-location-dot" style="font-size: 48px; margin-bottom: 16px; opacity: 0.3;"></i>
                                <p style="margin: 0;">Upload your CSV data to view regional analytics</p>
                            </div>
                        </div>

                        <div class="anomaly-alert" style="display: none;">
                            <i class="fa-solid fa-bolt"></i>
                            <span><strong>Anomaly:</strong> Detected from your data</span>
                        </div>
                    </div>

                </div>

                <!-- Dashboard Grid Row 2 -->
                <div class="dashboard-grid" style="margin-top: 24px;">

                    <!-- Chart Card: Age Distribution -->
                    <div class="glass-panel" style="grid-column: span 2;">
                        <div class="card-title">
                            <h3 data-i18n="enrolment_by_age">Enrolment by Age Group</h3>
                            <span class="tag" data-i18n="demographics">Demographics</span>
                        </div>
                        <div style="height: 200px; width: 100%;">
                            <canvas id="ageChart"></canvas>
                        </div>
                    </div>

                    <!-- Gender Distribution Stats -->
                    <div class="glass-panel">
                        <div class="card-title">
                            <h3 data-i18n="gender_split">Gender Split</h3>
                        </div>
                        <div class="gender-stats">
                            <div class="gender-row">
                                <div class="g-info">
                                    <span class="g-label" data-i18n="male">Male</span>
                                    <div class="g-bar-bg">
                                        <div class="g-bar-fill" style="width: 0%; background: #6366f1;"></div>
                                    </div>
                                </div>
                                <span class="g-val">0%</span>
                            </div>
                            <div class="gender-row" style="margin-top: 15px;">
                                <div class="g-info">
                                    <span class="g-label" data-i18n="female">Female</span>
                                    <div class="g-bar-bg">
                                        <div class="g-bar-fill" style="width: 0%; background: #ec4899;"></div>
                                    </div>
                                </div>
                                <span class="g-val">0%</span>
                            </div>
                            <div class="gender-row" style="margin-top: 15px;">
                                <div class="g-info">
                                    <span class="g-label" data-i18n="other">Other</span>
                                    <div class="g-bar-bg">
                                        <div class="g-bar-fill" style="width: 0%; background: #a855f7;"></div>
                                    </div>
                                </div>
                                <span class="g-val">0%</span>
                                </div>
                            </div>
                            <div class="insight-text" style="margin-top: 20px; display: none;">
                                <i class="fa-solid fa-check"></i> Upload data to view distribution
                            </div>
                        </div>
                    </div>
                    
                    <!-- District Service Readiness Scores -->
                    <div class="glass-panel" style="grid-column: span 2;">
                        <div class="panel-header">
                            <h3>
                                <i class="fa-solid fa-ranking-star"></i>
                                <span data-i18n="district_service_readiness">District Service Readiness</span>
                            </h3>
                        </div>
                        <div id="districtScores" style="margin-top: 16px;">
                            <p style="color: var(--text-muted); text-align: center; padding: 24px;">
                                Upload data to view district readiness scores
                            </p>
                        </div>
                    </div>
                    
                    <!-- Key Findings -->
                    <div class="glass-panel" style="grid-column: span 2;">
                        <div class="panel-header">
                            <h3>
                                <i class="fa-solid fa-lightbulb"></i>
                                <span data-i18n="key_findings">Key Findings</span>
                            </h3>
                        </div>
                        <ul id="keyFindings" style="list-style: none; padding: 0; margin-top: 16px; color: var(--text-muted);">
                            <li style="padding: 12px; text-align: center;">Upload data to view insights</li>
                        </ul>
                    </div>
                    
                    <!-- Recommendations -->
                    <div class="glass-panel" style="grid-column: span 2;">
                        <div class="panel-header">
                            <h3>
                                <i class="fa-solid fa-list-check"></i>
                                <span data-i18n="recommendations">Recommendations</span>
                            </h3>
                        </div>
                        <ul id="recommendations" style="list-style: none; padding: 0; margin-top: 16px; color: var(--text-muted);">
                            <li style="padding: 12px; text-align: center;">Upload data to view recommendations</li>
                        </ul>
                    </div>

                </div>
            </div>

            <!-- Trends Section -->
            <div id="view-trends" class="view-section hidden">
                <header class="top-bar">
                    <div class="header-text">
                        <h1>Trends Analysis</h1>
                        <p>Historical data and forecasting</p>
                    </div>
                </header>
                <div class="dashboard-grid">
                    <div class="glass-panel"
                        style="grid-column: span 4; display: flex; align-items: center; justify-content: center; height: 400px; flex-direction: column; gap: 20px;">
                        <div class="icon-box blue" style="width: 80px; height: 80px; font-size: 32px;">
                            <i class="fa-solid fa-chart-line"></i>
                        </div>
                        <h2 style="color: var(--text-muted);">Trends Data Visualization Placeholder</h2>
                        <p style="color: var(--text-muted);">Detailed graphs and temporal analysis will appear here.</p>
                    </div>
                </div>
            </div>

            <!-- Geospatial Section -->
            <div id="view-geo" class="view-section hidden">
                <header class="top-bar">
                    <div class="header-text">
                        <h1>Geospatial Map</h1>
                        <p>Geographic distribution of enrolments</p>
                    </div>
                </header>
                <div class="dashboard-grid">
                    <div class="glass-panel"
                        style="grid-column: span 4; display: flex; align-items: center; justify-content: center; height: 600px; flex-direction: column; gap: 20px;">
                        <div class="icon-box purple" style="width: 80px; height: 80px; font-size: 32px;">
                            <i class="fa-solid fa-map-location-dot"></i>
                        </div>
                        <h2 style="color: var(--text-muted);">Interactive Map Placeholder</h2>
                        <p style="color: var(--text-muted);">India map with state-wise density heatmaps will be rendered
                            here.</p>
                    </div>
                </div>
            </div>

            <!-- Reports Section -->
            <div id="view-reports" class="view-section hidden">
                <header class="top-bar">
                    <div class="header-text">
                        <h1>Reports Export</h1>
                        <p>Generate and download analysis reports</p>
                    </div>
                </header>
                <div class="dashboard-grid">
                    <div class="glass-panel"
                        style="grid-column: span 4; display: flex; align-items: center; justify-content: center; height: 400px; flex-direction: column; gap: 20px;">
                        <div class="icon-box green" style="width: 80px; height: 80px; font-size: 32px;">
                            <i class="fa-solid fa-file-export"></i>
                        </div>
                        <h2 style="color: var(--text-muted);">Reports Module</h2>
                        <p style="color: var(--text-muted);">Options to download PDF/CSV reports will be available here.
                        </p>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- States Modal -->
    <div id="statesModal" class="modal-overlay hidden">
        <div class="modal-content glass-panel">
            <div class="modal-header">
                <h3>State-wise Enrolment Data</h3>
                <button id="closeModalBtn" class="btn-icon-small"><i class="fa-solid fa-xmark"></i></button>
            </div>
            <div class="modal-body">
                <table class="states-table">
                    <thead>
                        <tr>
                            <th>Rank</th>
                            <th>State</th>
                            <th>Enrolments</th>
                            <th>Trend</th>
                        </tr>
                    </thead>
                    <tbody id="statesTableBody">
                        <!-- Populated by JS -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Enrolment Details Modal -->
    <div id="enrolmentModal" class="modal-overlay hidden">
        <div class="modal-content glass-panel">
            <div class="modal-header">
                <h3><i class="fa-solid fa-users"></i> Total Enrolments - Detailed Breakdown</h3>
                <button class="btn-icon-small modal-close"><i class="fa-solid fa-xmark"></i></button>
            </div>
            <div class="modal-body">
                <div class="detail-stats-grid">
                    <div class="detail-stat-item">
                        <span class="detail-label">Total Count</span>
                        <span class="detail-value" id="enrolmentTotal">-</span>
                    </div>
                    <div class="detail-stat-item">
                        <span class="detail-label">Growth Rate</span>
                        <span class="detail-value" id="enrolmentGrowth">+12.5%</span>
                    </div>
                    <div class="detail-stat-item">
                        <span class="detail-label">Daily Average</span>
                        <span class="detail-value" id="enrolmentAvg">-</span>
                    </div>
                    <div class="detail-stat-item">
                        <span class="detail-label">Peak Day</span>
                        <span class="detail-value">Last Monday</span>
                    </div>
                </div>
                <div class="detail-section">
                    <h4>Age Group Distribution</h4>
                    <div id="enrolmentAgeBreakdown" class="age-breakdown">
                        <!-- Populated by JS -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Updates Details Modal -->
    <div id="updatesModal" class="modal-overlay hidden">
        <div class="modal-content glass-panel">
            <div class="modal-header">
                <h3><i class="fa-solid fa-arrows-rotate"></i> Total Updates - Detailed View</h3>
                <button class="btn-icon-small modal-close"><i class="fa-solid fa-xmark"></i></button>
            </div>
            <div class="modal-body">
                <div class="detail-stats-grid">
                    <div class="detail-stat-item">
                        <span class="detail-label">Total Updates</span>
                        <span class="detail-value" id="updatesTotal">-</span>
                    </div>
                    <div class="detail-stat-item">
                        <span class="detail-label">Biometric</span>
                        <span class="detail-value" id="updatesBio">-</span>
                    </div>
                    <div class="detail-stat-item">
                        <span class="detail-label">Demographic</span>
                        <span class="detail-value" id="updatesDemo">-</span>
                    </div>
                    <div class="detail-stat-item">
                        <span class="detail-label">Success Rate</span>
                        <span class="detail-value">97.8%</span>
                    </div>
                </div>
                <div class="detail-section">
                    <h4>Top Reasons for Updates</h4>
                    <ul class="reason-list">
                        <li>Address Change - 35%</li>
                        <li>Biometric Renewal - 28%</li>
                        <li>Mobile Number Update - 22%</li>
                        <li>Photo Update - 15%</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- Authentications Details Modal -->
    <div id="authModal" class="modal-overlay hidden">
        <div class="modal-content glass-panel">
            <div class="modal-header">
                <h3><i class="fa-solid fa-fingerprint"></i> Authentications - Detailed Analysis</h3>
                <button class="btn-icon-small modal-close"><i class="fa-solid fa-xmark"></i></button>
            </div>
            <div class="modal-body">
                <div class="detail-stats-grid">
                    <div class="detail-stat-item">
                        <span class="detail-label">Total Auth Requests</span>
                        <span class="detail-value">45.2M</span>
                    </div>
                    <div class="detail-stat-item">
                        <span class="detail-label">Success Rate</span>
                        <span class="detail-value">98.6%</span>
                    </div>
                    <div class="detail-stat-item">
                        <span class="detail-label">Avg Response Time</span>
                        <span class="detail-value">1.2s</span>
                    </div>
                    <div class="detail-stat-item">
                        <span class="detail-label">Failed Attempts</span>
                        <span class="detail-value">632K</span>
                    </div>
                </div>
                <div class="detail-section">
                    <h4>Authentication Methods</h4>
                    <ul class="reason-list">
                        <li>Fingerprint - 68%</li>
                        <li>Iris - 22%</li>
                        <li>OTP - 8%</li>
                        <li>Face Recognition - 2%</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- File Viewer Modal -->
    <div id="fileModal" class="modal-overlay hidden">
        <div class="modal-content glass-panel" style="max-width: 900px; height: 80vh;">
            <div class="modal-header">
                <h3>Source Data Viewer</h3>
                <button id="closeFileModalBtn" class="btn-icon-small"><i class="fa-solid fa-xmark"></i></button>
            </div>
            <div class="modal-body">
                <div style="overflow-x: auto; height: calc(100% - 60px);">
                    <table class="states-table" id="fileDataTable">
                        <thead id="fileTableHead"></thead>
                        <tbody id="fileTableBody"></tbody>
                    </table>
                </div>
                <div class="pagination-footer"
                    style="padding: 10px; display: flex; justify-content: space-between; align-items: center; border-top: 1px solid var(--border);">
                    <button id="prevPageBtn" class="btn-primary-small" disabled>Previous</button>
                    <span id="pageInfo" style="font-size: 13px; font-weight: 500;">Page 1 of 1</span>
                    <button id="nextPageBtn" class="btn-primary-small">Next</button>
                </div>
            </div>
        </div>
    </div>

    <script src="dashboard.js?v=1.2"></script>
</body>

</html>